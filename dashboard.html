<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FloodLens Dashboard</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <!--for now placeholder muna yung emojis-->
  <nav>
    <div class="logo">
      <div class="logo-icon">ğŸŒŠ</div>
      <span>FloodLens</span>
    </div>
    <div class="nav-links">
      <button class="nav-link" onclick="window.location.href='index.html'">Home</button>
      <button class="nav-link active" onclick="window.location.href='dashboard.html'">Dashboard</button>
      <button class="nav-link" onclick="window.location.href='reports.html'">Reports</button>
      <button class="nav-link" onclick="window.location.href='blockchain.html'">Blockchain</button>
      <button class="nav-link" onclick="window.location.href='leaderboard.html'">Leaderboard</button>
      <button class="nav-link" onclick="window.location.href='education.html'">Education</button>
    </div>
  </nav>

  <div class="dashboard">
    <div class="dashboard-header">
      <h1>FloodLens Dashboard</h1>
      <div class="dashboard-actions">
        <button class="btn btn-primary" onclick="refreshData()">ğŸ”„ Refresh Data</button>
        <button class="btn btn-secondary" onclick="openModal('floodTipsModal')">ğŸ’¡ Flood Safety Tips</button>
      </div>
    </div>

    <div class="weather-alert" id="weatherAlert">
      ğŸŒ§ï¸ Fetching latest rainfall simulation data...
    </div>

    <div class="dashboard-content">
<!-- map + locations -->
<div class="map-section">
  <h2>Interactive Metro Manila Flood Map</h2>
  <p style="color: #666; font-size: 0.9rem; margin-bottom: 1rem;">
    Click on markers or area cards to view details â€¢ Drag to pan â€¢ Use controls to zoom
  </p>
  
  <div class="map-container" id="mapContainer">
    <div class="map-controls">
      <button class="map-control-btn" onclick="zoomIn()">â•</button>
      <button class="map-control-btn" onclick="zoomOut()">â–</button>
      <button class="map-control-btn" onclick="resetMap()">ğŸ¯</button>
    </div>
    
    <div class="map-canvas" id="mapCanvas">
      <div class="map-markers" id="mapMarkers"></div>
    </div>
  </div>

  <div class="location-cards" id="locationCards"></div>
</div>


        <div class="location-cards" id="locationCards">
          <!--js na mag gegenerate nung simulated flood data-->
        </div>
      </div>

    <!-- sidebar-->
    <aside class="sidebar">
      <div class="assistant-card">
        <div class="assistant-header">
          <div class="assistant-title">LensBot Assistant</div>
          <div class="assistant-time">06:00 AM</div>
        </div>

        <div class="chat-stage" id="chatStage">
          <div class="welcome">
            <div class="welcome-icon">ğŸ¤–</div>
            <div class="welcome-text">
              Hello! I'm LensBot, your flood monitoring assistant. Ask me about flood risks, safety tips, AI predictions, anonymous reporting, or priority rescue zones!
            </div>
          </div>

          <div id="chatMessages" class="chat-messages"></div>

          <div class="typing" id="typingIndicator" aria-hidden="true">
            <span class="dot"></span><span class="dot"></span><span class="dot"></span>
          </div>
        </div>

        <div class="suggested-questions">
          <button class="qbtn" onclick="askLensBot('What\\'s the flood prediction in Manila right now?')">What's the flood prediction in Manila right now?</button>
          <button class="qbtn" onclick="askLensBot('Show me priority rescue zones')">Show me priority rescue zones</button>
          <button class="qbtn" onclick="askLensBot('Give me safety tips for pregnant women during floods')">Give me safety tips for pregnant women during floods</button>
        </div>

        <div class="chat-input">
          <input id="chatInput" placeholder="Ask me anything..." onkeypress="if(event.key==='Enter') sendChatMessage()" />
          <button id="chatSend" onclick="sendChatMessage()">â¤</button>
        </div>
      </div>

      <div class="tips-card">
        <h3>ğŸ’§ FloodLens Tips</h3>
        <ul class="tips-list">
          <li>Monitor rainfall levels regularly during rainy season</li>
          <li>Evacuate immediately when status reaches "Flooded"</li>
          <li>Keep emergency supplies ready: food, water, flashlight, first aid</li>
          <li>Never walk or drive through flooded areas</li>
          <li>Stay informed through official weather updates</li>
          <li>Know your evacuation routes and nearest shelters</li>
          <li>Keep important documents in waterproof containers</li>
          <li>Report incidents through the Reports page</li>
        </ul>
      </div>
    </aside>

  <!-- area detail modal -->
<div class="modal" id="areaDetailModal">
  <div class="modal-content" style="max-width: 700px;">
    <div class="modal-header">
      <h3 id="modalAreaName">Area Details</h3>
      <button class="close-btn" onclick="closeModal('areaDetailModal')">&times;</button>
    </div>
    <div class="modal-body">
      <div class="modal-section">
        <div class="status-badge" id="modalStatusBadge">Normal</div>
        
        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; margin: 1.5rem 0;">
          <div class="metric">
            <div class="metric-label">ğŸ’§ Rainfall Level</div>
            <div class="metric-value" id="modalRainfall">-- mm/hr</div>
          </div>
          <div class="metric">
            <div class="metric-label">ğŸŒŠ Water Level</div>
            <div class="metric-value" id="modalWaterLevel">-- cm</div>
          </div>
        </div>
      </div>

      <div class="modal-section">
        <h3>âœ¨ LensBot Insights</h3>
        <div class="assistant-message" id="modalLensBotInsights">
          Analyzing current conditions...
        </div>
      </div>

      <div class="modal-section" id="modalSafetyAlert"></div>

      <div class="modal-section">
        <h3>ğŸ“Š Risk Assessment</h3>
        <div class="info-box">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
            <strong>Current Risk Level</strong>
            <span id="modalRiskLevel" style="font-weight: bold; color: #10b981;">Low Risk</span>
          </div>
          <div style="font-size: 0.9rem; color: #666;">
            <div>â€¢ Normal: &lt;30 mm/hr</div>
            <div>â€¢ Watch: 30-50 mm/hr</div>
            <div>â€¢ Flooded: â‰¥50 mm/hr</div>
          </div>
        </div>
      </div>

      <div class="modal-section">
        <h3>ğŸ“ˆ AI Prediction</h3>
        <div class="prediction">
          <div class="prediction-title">Next Hour Forecast</div>
          <div id="modalPrediction">Analyzing trends...</div>
        </div>
      </div>

      <div class="modal-section">
        <h3>ğŸ• Recent Status Changes</h3>
        <div id="modalStatusHistory" style="font-size: 0.9rem; color: #666;">
          No status changes recorded yet
        </div>
      </div>

      <div class="modal-section">
        <p style="color: #999; font-size: 0.85rem; margin-top: 1rem;">
          â° Last updated: <span id="modalLastUpdated">--</span>
        </p>
      </div>
    </div>
  </div>
</div>

  <script src="script.js"></script>
</body>
</html>
